<script>
  let data = {
    personal: {
      userType: '‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£',
      email: 'user@example.com',
      firstname: '‡∏™‡∏°‡∏ä‡∏≤‡∏¢',
      lastname: '‡πÉ‡∏à‡∏î‡∏µ',
      idcard: '1234567890123',
      birthday: '1990-01-01',
      address: '123 ‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á'
    },
    durian: {
      durianType: '‡∏´‡∏°‡∏≠‡∏ô‡∏ó‡∏≠‡∏á',
      durianOther: ''
    },
    farm: {
      farmName: '‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á',
      farmSize: '10 ‡πÑ‡∏£‡πà',
      location: '‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á'
    },
    landDoc: {
      deedNumber: '123/456',
      issueDate: '2020-01-01',
      file: 'deed.pdf'
    }
  };

  // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö edit field
  let editField = null;
  let tempValue = '';

  function startEdit(section, key) {
    editField = `${section}.${key}`;
    tempValue = data[section][key];
  }

  function saveEdit(section, key) {
    data[section][key] = tempValue;
    editField = null;
  }

  function cancelEdit() {
    editField = null;
  }
</script>

<section class="profile">
  <h1>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h1>

  <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß -->
  <div class="card">
    <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h2>
    {#each Object.entries(data.personal) as [key, value]}
      <div class="field">
        <label>{key}</label>
        {#if editField === `personal.${key}`}
          <input bind:value={tempValue} />
          <button type="button" on:click={() => saveEdit('personal', key)}>üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          <button type="button" on:click={cancelEdit}>‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        {:else}
          <input type="text" value={value} readonly />
          <button type="button" on:click={() => startEdit('personal', key)}>‚úèÔ∏è</button>
        {/if}
      </div>
    {/each}
  </div>

  <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô -->
  <div class="card">
    <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
    {#each Object.entries(data.durian) as [key, value]}
      <div class="field">
        <label>{key}</label>
        {#if editField === `durian.${key}`}
          <input bind:value={tempValue} />
          <button type="button" on:click={() => saveEdit('durian', key)}>üíæ</button>
          <button type="button" on:click={cancelEdit}>‚ùå</button>
        {:else}
          <input type="text" value={value} readonly />
          <button type="button" on:click={() => startEdit('durian', key)}>‚úèÔ∏è</button>
        {/if}
      </div>
    {/each}
  </div>

  <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏û‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å -->
  <div class="card">
    <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏û‡∏≤‡∏∞‡∏õ‡∏•‡∏π‡∏Å</h2>
    {#each Object.entries(data.farm) as [key, value]}
      <div class="field">
        <label>{key}</label>
        {#if editField === `farm.${key}`}
          <input bind:value={tempValue} />
          <button type="button" on:click={() => saveEdit('farm', key)}>üíæ</button>
          <button type="button" on:click={cancelEdit}>‚ùå</button>
        {:else}
          <input type="text" value={value} readonly />
          <button type="button" on:click={() => startEdit('farm', key)}>‚úèÔ∏è</button>
        {/if}
      </div>
    {/each}
  </div>

  <!-- ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô -->
  <div class="card">
    <h2>‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô</h2>
    {#each Object.entries(data.landDoc) as [key, value]}
      <div class="field">
        <label>{key}</label>
        {#if editField === `landDoc.${key}`}
          <input bind:value={tempValue} />
          <button type="button" on:click={() => saveEdit('landDoc', key)}>üíæ</button>
          <button type="button" on:click={cancelEdit}>‚ùå</button>
        {:else}
          <input type="text" value={value} readonly />
          <button type="button" on:click={() => startEdit('landDoc', key)}>‚úèÔ∏è</button>
        {/if}
      </div>
    {/each}
  </div>

  <div class="btn-group">
    <button class="btn" on:click={() => alert('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‚úÖ')}>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
  </div>
</section>

<style>
  .profile {font-family: 'Prompt', sans-serif; }
  h1 { color: #010b05; margin-bottom: 16px; }
  .card { background: #fff; border-radius: 12px; box-shadow: 0 3px 8px rgba(0,0,0,0.1); padding: 20px; margin-bottom: 20px; }
  .field { display: flex; align-items: center; gap: 6px; margin-bottom: 8px; }
  label { width: 150px; font-weight: 600; }
  input[readonly] { background-color: #f3f4f6; border: 1px solid #d1d5db; border-radius: 6px; padding: 6px; flex: 1; }
  input { flex: 1; border: 1px solid #d1d5db; border-radius: 6px; padding: 6px; }
  button { padding: 6px 10px; border-radius: 6px; border: none; cursor: pointer; }
  .btn-group { display: flex; justify-content: flex-end; margin-top: 16px; }
  .btn { background-color: #166534; color: #fff; padding: 10px 16px; border-radius: 8px; font-weight: 600; }
</style>
